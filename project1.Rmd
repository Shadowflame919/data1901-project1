---
title: "DATA1901 Project 1"
author: "Aitchison 490378115, Braham 490422474, Hempstead XXXXXXXXX"
subtitle: "On the Influence of US College Majors"
date: "University of Sydney | Semester 1 | March 2019"
output: 
  html_document:
      code_folding: hide
      css: #https://use.fontawesome.com/releases/v5.0.6/css/all.css
      df_print: paged
      fig_caption: yes
      number_sections: yes
      self_contained: yes
      theme: journal #https://bootswatch.com
      toc: yes
      toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
if (!require(ggplot2)) {
  install.packages("ggplot2")
  library(ggplot2)
}
```

<!--We suggest 400 words (max) for the Executive Summary, 200 words (max) for the IDA, and 250 words (max) for each of the Research Questions.-->

# Executive Summary

<br>
<br>

# Full Report

## Initial Data Analysis (IDA)

```{r loadData}
gradData = read.csv("data/recent-grads.csv")
```

### Source

Data collected from the American Community Survey 2010 - 2012 Public Use Microdata Series (PUMS Data) at the [USA Census Website](https://www.census.gov/programs-surveys/acs/data/pums.html). It was initially wrangled by American media company [FiveThirtyEight](https://github.com/fivethirtyeight/data/tree/master/college-majors). The code used to wrangle the data can be viewed [here](https://github.com/fivethirtyeight/data/blob/master/college-majors/college-majors-rscript.R). 

Note that:

- Data was not adjusted for inflation 
- "Recent-grads" data was filtered to only include subjects below the age of *28*

### Data Dictionary

```{r}
# View the structure of the data:
str(gradData)
```

This data consists of 20 variables (excluding "Rank" which orders the subjects by Median income). 

#### Major_code {-}
A unique code for each major, given by the [source](https://www.census.gov/programs-surveys/acs/data/pums.html). <br>
*Type*: Integer 
<br>
*Assessment*: Although it is a number, a factor classification would be more suitable as the codes are considered nominal (no order). 


#### Major {-}
The major's name.
<br>
*Type*: Factor 
<br>
*Assessment*: Either a character or factor classification would be suitable. 

#### Total, Men, Women {-}
Amount of total people, men, and women respectively with that major in the sample for 2010-2012.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable. 

#### Major_category {-}
General category for that major (e.g. "Engineering").
<br>
*Type*: Factir 
<br>
*Assessment*: Suitable - allows for easy classification and plotting.

#### ShareWomen {-}
Women as a percentage of Total.
<br>
*Type*: Number 
<br>
*Assessment*: Suitable, since it is provided as a decimal (multiply by 100 if plotting percentages). 


#### Sample_size {-}
Sample size for calculating income quartiles.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable. 

#### Employed, Full_time, Part_time {-}
Number of people employed, employed 35 hours or more per week, and employed 35 hours or less respectively.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable. 

#### Full_time_year_round {-}
Number of people employed for at least 50 weeks per year and over 35 hours hours per week.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable. 

#### Unemployed {-}
Number of people considered unemployed by census data.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable. 

#### Unemployment_rate {-}
The percentage of people unemployed over (unemployed + employed).
<br>
*Type*: Number 
<br>
*Assessment*: Suitable. 

#### Median, P25th, P75th {-}
Meadian, 25th percentile, and 75th percentile earnings respectively for full-time, year-round workers.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable - although income is continuous, it can be considered discrete without significantly impacting the data. 

#### College_jobs, Non_college_jobs, Low_wage_jobs {-}
Number of people with a job requiring a college degree, not requiring a college degree, and in a low-wage service job respectively.
<br>
*Type*: Integer 
<br>
*Assessment*: Suitable. 


### Data Assessment

- The data is valid because ...
- Possible issues include ...
  - Missing values in some rows
- We will solve this by ...

### Data Wrangling

```{r}
# Remove rows with blank values
```

<br>

<!--## Research Question Drafts Old

Q1
"Is there a correlation between majors that promote higher paying jobs and the associated unemployment rates?" 
Scatter plot (LOB)
(Doesn't really work :(((( )

Q1B
"Is there a correlation between gender ratios and expected income?"

Q2
"Which college degrees are most relevant to the subsequent job (based on number of college jobs)?" 

Q3 *Based on previous results
"What are the comparative unemployment rates between Engineering and Liberal Arts graduates?" 
Unemployment rate between major categories (Simpson's Paradox) potential
Get top 10 from each Humanities and Liberal Arts + Engineering -->

## New questions:
Q1: Which college majors give the highest incomes?
Sub-question: How does this take into account spread (i.e. compare 75th vs median vs 25th)

Q2: Which college majors give the highest employability (based on unemployment)?
Sub-question: How much of this employment is actually in their field / based on the degree (looking at college jobs vs non-college jobs)?

Q3: Which college majors pay the most per time worked (looking at % full time)? 

Q3 (alternative): Looking at the results from Q1 and Q2, how do these "rankings" align with the popularity of these courses (based on total people = employed + unemployed)

## Research Question 1

**Which college major should a student take to receive the highest income?**

There are three variables to consider when looking at income - the 25th percentile, median, and 75th percentile. Additionally, it is important to consider whether to look at individual majors or major categories. <br> Taking the Median income against major category initially, we get:

```{r}
ggplot(gradData, aes(x=factor(Major_category), y=Median/1000)) +
  geom_boxplot(aes(fill = factor(Major_category))) + 
  theme(axis.text.x = element_blank(), axis.title.x = element_blank(), axis.ticks.x = element_blank()) +
  labs(fill = "Major Category", title = "Median Income per Major Category") + 
  ylab("Median Income ($1000)")
```
<br>
Removing the outlier in Engineering:
```{r}
ggplot(gradData[gradData$Median<100000,], aes(x=factor(Major_category), y=Median/1000)) +
  geom_boxplot(aes(fill = factor(Major_category))) + 
  theme(axis.text.x = element_blank(), axis.title.x = element_blank(), axis.ticks.x = element_blank()) +
  labs(fill = "Major Category", title = "Median Income per Major Category (Removed Outlier)") + 
  ylab("Median Income ($1000)")
```
<br>
Looking instead at individual majors, we initially have too many datapoints to make sense of the information. 
Instead, since the data is already ordered by median income, we can take the top 10 results before graphing:
<!--Very messy code ahead:-->
```{r plot top 10 majors by income}
# Selects top 10
gradData.head = head(gradData, n=10) 
# Creates a new data frame to be able to plot median, 25th, and 75th percentiles on the same graph 
median.df = data.frame(Major = gradData.head$Major, Major_category=gradData.head$Major_category, 
                       Income = gradData.head$Median)
p25.df = data.frame(Major = gradData.head$Major, Major_category=gradData.head$Major_category, 
                       Income = gradData.head$P25th)
p75.df = data.frame(Major = gradData.head$Major, Major_category=gradData.head$Major_category, 
                       Income = gradData.head$P75th)
gradData.head.df = rbind(median.df, p25.df, p75.df)
# For reordering the majors
score = rbind(gradData.head, gradData.head, gradData.head)
# Plots a boxplot
ggplot(gradData.head.df, aes(x=reorder(Major, -score$Median), y=Income/1000)) + 
  geom_boxplot(aes(fill = reorder(sub("AND", "\nAND",Major), -score$Median))) +
  theme(axis.text.x = element_blank(), axis.title.x = element_blank(), 
        axis.ticks.x = element_blank()) +
  labs(fill = "Major", title = "Top 10 Majors by Income") + 
  ylab("Income ($1000)") + xlab("Major")
```
<br>
```{r plot bottom 10 majors by income}
# Selects bottom 10
gradData.tail = tail(gradData, n=10)
# Creates a new data frame to be able to plot median, 25th, and 75th percentiles on the same graph
median.df = data.frame(Major = gradData.tail$Major, Major_category=gradData.tail$Major_category, 
                       Income = gradData.tail$Median)
p25.df = data.frame(Major = gradData.tail$Major, Major_category=gradData.tail$Major_category, 
                       Income = gradData.tail$P25th)
p75.df = data.frame(Major = gradData.tail$Major, Major_category=gradData.tail$Major_category, 
                       Income = gradData.tail$P75th)
gradData.tail.df = rbind(median.df, p25.df, p75.df)
# For reordering the majors
score = rbind(gradData.tail, gradData.tail, gradData.tail)
# Plots a boxplot
ggplot(gradData.tail.df, aes(x=reorder(Major, -score$Median), y=Income/1000)) + 
  geom_boxplot(aes(fill = reorder(sub("AND", "\nAND",Major), -score$Median))) +
  theme(axis.text.x = element_blank(), axis.title.x = element_blank(), 
        axis.ticks.x = element_blank()) +
  labs(fill = "Major", title = "Bottom 10 Majors by Income") + 
  ylab("Income ($1000)") + xlab("Major")
```
<br>
```{r plot top 5 and bottom 5 majors by income}
# Selects top 5
gradData.head = head(gradData, n=5)
# Creates a new data frame to be able to plot median, 25th, and 75th percentiles on the same graph
median.df = data.frame(Major = gradData.head$Major, Major_category=gradData.head$Major_category, 
                       Income = gradData.head$Median)
p25.df = data.frame(Major = gradData.head$Major, Major_category=gradData.head$Major_category, 
                       Income = gradData.head$P25th)
p75.df = data.frame(Major = gradData.head$Major, Major_category=gradData.head$Major_category, 
                       Income = gradData.head$P75th)
gradData.head.df = rbind(median.df, p25.df, p75.df)
# Selects bottom 5
gradData.tail = tail(gradData, n=5)
# Creates a new data frame to be able to plot median, 25th, and 75th percentiles on the same graph
median.df = data.frame(Major = gradData.tail$Major, Major_category=gradData.tail$Major_category, 
                       Income = gradData.tail$Median)
p25.df = data.frame(Major = gradData.tail$Major, Major_category=gradData.tail$Major_category, 
                       Income = gradData.tail$P25th)
p75.df = data.frame(Major = gradData.tail$Major, Major_category=gradData.tail$Major_category, 
                       Income = gradData.tail$P75th)
gradData.tail.df = rbind(median.df, p25.df, p75.df)
score = rbind(gradData.tail, gradData.tail, gradData.tail)
# Combines the two
gradData.tail.df =rbind(gradData.head.df, gradData.tail.df)
# Orders it
score = rbind(gradData.head, gradData.head, gradData.head, score)
# Plots a boxplot
ggplot(gradData.tail.df, aes(x=reorder(Major, -score$Median), y=Income/1000)) + 
  geom_boxplot(aes(fill = reorder(sub("AND", "\nAND",Major), -score$Median))) +
  theme(axis.text.x = element_blank(), axis.title.x = element_blank(), 
        axis.ticks.x = element_blank()) +
  labs(fill = "Major", title = "Top 5 and Bottom 5 Majors by Income") + 
  ylab("Income ($1000)") + xlab("Major")
```
<br>
Interesting to note that the separation of Petroleum Engineering from the other top 5 is comparable to the separation of the top 5 from the bottom 5. 
<br> <br>
**Summary**: Petroleum Engineering is ... Engineering is ...

## Research Question 2
**Which college major should a student pursue to see the greatest prospects for employment?**
Insert text and analysis. 

Summary: 

```{r}
percentCollege = gradData$College_jobs/(gradData$College_jobs+gradData$Non_college_jobs+gradData$Low_wage_jobs)
ggplot(gradData, aes(x=factor(Major_category), y=percentCollege)) + 
  geom_boxplot(aes(fill = factor(Major_category))) +
  theme(axis.text.x = element_blank(), axis.title.x = element_blank(), axis.ticks.x = element_blank()) +
  labs(fill = "Major Category", title="Percent College Jobs per Major Category") + 
  ylab("Percentage of Jobs as College Jobs")
```

## Research Question 3

Insert text and analysis. 

Summary: 

<br>

# Conclusions

Insert text.

<br>

```{r}
sessionInfo()
```


# References

Style: APA 
Major categories were sourced from ["What's It Worth?: The Economic Value of College Majors." Georgetown University Center on Education and the Workforce, 2011](http://cew.georgetown.edu/whatsitworth). 

<br>

# Personal reflection on group work

- The way I contributed was ...
- What I learnt about group work was ... 

<br>

